# ========================================
# RAILWAY DEPLOYMENT ENVIRONMENT VARIABLES
# ========================================
# Copie estas variáveis para o Railway Dashboard > Variables
# Substitua os valores entre <> pelos valores reais

# ========== NODE & DATABASE ==========
NODE_ENV=production
PORT=3000
# Railway fornece DATABASE_URL automaticamente se você conectar PostgreSQL
# DATABASE_URL=postgresql://user:password@host:port/database

# ========== CORS ==========
# Domínio do seu frontend (sem https://)
CORS_ORIGIN=<seu-frontend.vercel.app>

# ========== UPLOADS ==========
# No Railway, use o diretório /tmp que é persistente
UPLOAD_DIR=/tmp/uploads

# ========== AUTHENTICATION ==========
# CRÍTICO: Gere secrets fortes em produção!
# Use: openssl rand -base64 32
JWT_ACCESS_SECRET=<gere-um-secret-forte-aqui>
JWT_REFRESH_SECRET=<gere-outro-secret-forte-aqui>
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=365d

# ========== GOOGLE OAUTH ==========
# Suas credenciais do Google Cloud Console
GOOGLE_CLIENT_ID=<seu-client-id.apps.googleusercontent.com>
GOOGLE_CLIENT_SECRET=<seu-client-secret>
# URL do backend no Railway (ex: https://seu-app.up.railway.app)
GOOGLE_CALLBACK_URL=<https://seu-backend.up.railway.app>/api/auth/google/callback
# URL do frontend (ex: https://seu-frontend.vercel.app)
FRONTEND_URL=<https://seu-frontend.vercel.app>

# ========== EMAIL CONFIGURATION ==========
EMAIL_ENABLED=true
EMAIL_PROVIDER=resend

# Informações do remetente
EMAIL_FROM_ADDRESS=noreply@seudominio.com
EMAIL_FROM_NAME="Compra Coletiva"

# ===== RESEND (Produção - Recomendado) =====
# 1. Crie conta: https://resend.com/signup
# 2. Verifique domínio: https://resend.com/domains
# 3. Crie API Key: https://resend.com/api-keys
RESEND_API_KEY=<re_sua_api_key_aqui>

# ===== GMAIL (Alternativa) =====
# Se preferir usar Gmail, descomente as linhas abaixo:
# EMAIL_PROVIDER=gmail
# GMAIL_USER=<seu-email@gmail.com>
# GMAIL_APP_PASSWORD=<senha-app-16-caracteres>

# ========== REDIS (CRÍTICO!) ==========
# OPÇÃO 1: Usar serviço Redis do Railway (RECOMENDADO)
# 1. No Railway, clique em "+ New" > "Database" > "Add Redis"
# 2. Conecte ao seu serviço backend
# 3. Railway criará automaticamente a variável REDIS_URL
# 4. A variável já vem com credenciais: redis://default:senha@host:port
# REDIS_URL será preenchida automaticamente pelo Railway

# OPÇÃO 2: Redis externo (Upstash, Redis Cloud, etc.)
# Se usar Redis externo, cole a URL completa aqui:
# REDIS_URL=redis://username:senha@host:port
# Nota: Railway usa "default" como username: redis://default:senha@host:port

# OPÇÃO 3: Variáveis separadas (se não puder usar REDIS_URL)
# REDIS_HOST=<host>
# REDIS_PORT=6379
# REDIS_USERNAME=default
# REDIS_PASSWORD=<sua_senha>

# OPÇÃO 4: Redis sem senha (NÃO RECOMENDADO para produção)
# REDIS_HOST=<host>
# REDIS_PORT=6379

# ========== EMAIL WORKER ==========
ENABLE_EMAIL_WORKER=true

# Configurações de fila (valores padrão funcionam bem)
EMAIL_QUEUE_MAX_ATTEMPTS=3
EMAIL_QUEUE_RETRY_DELAY=5000
EMAIL_QUEUE_RATE_LIMIT=10

# ========================================
# INSTRUÇÕES PARA CONFIGURAR NO RAILWAY
# ========================================
#
# 1. ADICIONAR REDIS:
#    - Dashboard > "+ New" > "Database" > "Add Redis"
#    - Conecte ao serviço backend
#    - Railway criará REDIS_URL automaticamente
#
# 2. ADICIONAR VARIÁVEIS:
#    - Dashboard > Seu Serviço > "Variables"
#    - Clique "New Variable"
#    - Cole cada variável acima (substitua valores entre <>)
#
# 3. VERIFICAR CONEXÕES:
#    - PostgreSQL deve estar conectado (DATABASE_URL)
#    - Redis deve estar conectado (REDIS_URL)
#
# 4. DEPLOY:
#    - Railway fará deploy automático após adicionar variáveis
#    - Verifique logs: Dashboard > Serviço > "Deployments" > logs
#
# 5. TESTAR:
#    - Acesse: https://seu-backend.up.railway.app/api/auth/me
#    - Deve retornar 401 (significa que está funcionando)
#
# ========================================
